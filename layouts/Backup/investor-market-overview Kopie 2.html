<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>OCOSO MVP - Full Layout</title>
    <link rel="stylesheet" href="styleV033.css?v=20240321">
    <style>
    </style>
</head>
<body>

<div id="navigation-placeholder"></div>
<div id="overlay-menu-placeholder"></div>


	

<section class="hero">
  <div class="hero-container" style="background-image: url('https://cdn.builder.io/api/v1/image/assets/TEMP/4691e67e3b75d917f12dc87357c5328ca76244d9');">
    <div class="hero-content-wrapper">
      <h1 class="main-heading">Invest</h1>
      <p></p>
      <p class="hero-description">
        It's not just capital. It's conviction. You're not buying ads — you're backing ideas. No brokers. No bias. Just code, ownership, and upside. This isn't Wall Street in disguise — it's a network where your stake shapes the story. Invest in attention. Invest in impact. And hold the proof in your wallet.
      </p>
    </div>
    <div class="cta-section">
      <div class="button-group">
        <div class="button-wrapper">
          <button class="action-button" aria-label="Login">
            <span class="button-text">Login</span>
          </button>
          <button class="action-button" aria-label="Register">
            <span class="button-text">Register</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
	
<div class="page-wrapper">	
	
	
  <div style="height: 80px">&nbsp;</div>
	
        <article class="card-content-wide">
      <div class="wrapper">
        <div class="responsive"  data-link="investor-market.html">
          <div class="image-container" style="background-image: url('img/invest-market.jpg');">
          </div>
          <div class="content-block">
            <div class="content-text">
              <h2 class="title">Market</h2>
              <p class="description">
                Track performance. Compare verticals. Make informed moves in the IP economy.
              </p>
            </div>
            <button class="action-button" aria-label="Stake Your Claim">
              <img
                src="img/Arrow.png"
                alt=""
                class="button-icon"
                aria-hidden="true"
              />
              <span class="button-text">ENTER THE MARKET</span>
            </button>
          </div>
        </div>
      </div>
		
      <div class="wrapper-reduced">
		  
        <div class="wrapper">
          <div class="responsive-reduced"  data-link="investor-trends.html">
            <div class="content-block-reduced">
              <div class="content-text-reduced">
                <h2 class="title">TRENDS</h2>
              </div>
              <button class="action-button" aria-label="Stake Your Claim">
                <img
                  src="img/Arrow.png"
                  alt=""
                  class="button-icon"
                  aria-hidden="true"
                />
                <span class="button-text">FOLLOW THE SIGNAL</span>
              </button>
            </div>
          </div>
        </div>
		  
        <div class="wrapper">
          <div class="responsive-reduced"  data-link="investor-partizipation.html">
            <div class="content-block-reduced">
              <div class="content-text-reduced">
                <h2 class="title">PARTICIPATE</h2>
              </div>
              <button class="action-button" aria-label="Stake Your Claim">
                <img
                  src="img/Arrow.png"
                  alt=""
                  class="button-icon"
                  aria-hidden="true"
                />
                <span class="button-text">JOIN THE TABLE</span>
              </button>
            </div>
          </div>
        </div>
		  
      </div>
		
    </article>
	
	  <div style="height: 80px">&nbsp;</div>	
	
<article class="headline-left-wrapper">
  <div class="healine-left-container">
    <div class="headline-left-inner">
      <header>
        <h2>You minted it. Now put it to work.</h2>
      </header>
      <section>
        <h4>
          Launch your content into the market. Claim your space. Set your terms. Make it earn. Pick your NFT and turn visibility into value.
        </h4>
      </section>
      <section>
        <p>
          Mint your content and make it untouchable. This isn't a post. It's a proof of authorship. This isn't a file. It's a fingerprint on-chain. You're not just creating — you're claiming what's yours. Mint it. Protect it. Own it forever.
        </p>
      </section>
    </div>
  </div>
</article>	
		
  <div style="height: 80px">&nbsp;</div>	
	
    <article class="card-content-wide">
      <div class="wrapper">
        <div class="responsive"  data-link="investor-market-overview.html">
          <div class="image-container" style="background-image: url('img/invest-overview.jpg');">
          </div>
          <div class="content-block">
            <div class="content-text">
              <h2 class="title">OVERVIEW</h2>
              <p class="description">
                See what moves the market. Compare verticals. Spot performance across the chain.
              </p>
            </div>
            <button class="action-button" aria-label="Stake Your Claim">
              <img
                src="img/Arrow.png"
                alt=""
                class="button-icon"
                aria-hidden="true"
              />
              <span class="button-text">EXPLORE THE INDEX</span>
            </button>
          </div>
        </div>
      </div>
		
      <div class="wrapper-reduced">
		  
        <div class="wrapper">
          <div class="responsive-reduced"  data-link="investor-market-invest.html">
            <div class="content-block-reduced">
              <div class="content-text-reduced">
                <h2 class="title">INVEST &amp; TRADE</h2>
              </div>
              <button class="action-button" aria-label="Stake Your Claim">
                <img
                  src="img/Arrow.png"
                  alt=""
                  class="button-icon"
                  aria-hidden="true"
                />
                <span class="button-text">START TRADING IP</span>
              </button>
            </div>
          </div>
        </div>
		  
        <div class="wrapper">
          <div class="responsive-reduced"  data-link="investor-market-results.html">
            <div class="content-block-reduced">
              <div class="content-text-reduced">
                <h2 class="title">YOUR RESULTS</h2>
              </div>
              <button class="action-button" aria-label="Stake Your Claim">
                <img
                  src="img/Arrow.png"
                  alt=""
                  class="button-icon"
                  aria-hidden="true"
                />
                <span class="button-text">VIEW YOUR PORTFOLIO</span>
              </button>
            </div>
          </div>
        </div>
		  
      </div>
		
    </article>
	
  <div style="height: 80px">&nbsp;</div>
	
<article class="headline-right-wrapper">
  <div class="healine-right-container">
    <div class="headline-right-inner">
      <header>
        <h2>See the Pulse of the Portfolio Economy</h2>
      </header>
      <section>
        <h4 style="text-align: right">
          Cross-compare categories, monitor growth, and follow the signals behind the strongest verticals.
        </h4>
      </section>
      <section>
        <p>
          The index doesn't lie. It shows which stories attract investment, which trends drive traction, and where attention converts to value. Use it to orient yourself — and act with insight, not instinct.
        </p>
      </section>
    </div>
  </div>
</article>		
	

  <div style="height: 160px">&nbsp;</div>
	
	<center class="content-frame dashboard-market-overview">

    <section class="dashboard-header">
      <h2 class="submission-title">Market Overview</h2>
      <p class="submission-subtitle">Discover IP-NFT investment opportunities across curated Vertical Funds.</p>
    </section>

    <!-- Search and Filter Section -->
    <section class="dashboard-filters">
      <input type="search" placeholder="Search Verticals (e.g., Gaming, AI, Music)" class="filter-search-input">
      <div class="filter-controls">
        <select name="category" aria-label="Filter by Category">
          <option value="">All Categories</option>
          <option value="publishing">Publishing</option>
          <option value="media">Media & Entertainment</option>
          <option value="knowledge">Knowledge & Utilities</option>
          <option value="gaming">Gaming</option>
          <option value="ai">AI & Data</option>
        </select>
        <select name="monetization" aria-label="Filter by Monetization">
          <option value="">All Monetization</option>
          <option value="ads">Advertising</option>
          <option value="licensing">Licensing</option>
          <option value="staking">Staking</option>
          <option value="trading">Trading</option>
        </select>
         <button class="filter-button">Apply Filters</button>
      </div>
    </section>

    <div class="dashboard-main-content">
        <!-- Highlights Panel -->
        <aside class="dashboard-highlights">
          <h3>Highlights</h3>
          <div class="highlight-section">
            <h4>Top Performing (30d APY)</h4>
            <ul>
              <li><a href="#">Decentralized Science (DeSci)</a> <span class="yield-positive">+18.5%</span></li>
              <li><a href="#">AI Music Generation</a> <span class="yield-positive">+15.2%</span></li>
              <li><a href="#">Indie Game Assets</a> <span class="yield-positive">+12.8%</span></li>
            </ul>
          </div>
          <div class="highlight-section">
            <h4>Recently Launched</h4>
            <ul>
              <li><a href="#">AR Historical Texts</a></li>
              <li><a href="#">Fractional Film Rights</a></li>
              <li><a href="#">Open Source LLM Data</a></li>
            </ul>
          </div>
           <div class="highlight-section">
            <h4>Trending Tags</h4>
            <div class="tag-cloud">
                <span class="tag">#AI</span> <span class="tag">#Gaming</span> <span class="tag">#DeFi</span>
                <span class="tag">#Publishing</span> <span class="tag">#MusicNFT</span> <span class="tag">#Utility</span>
                <span class="tag">#Metaverse</span> <span class="tag">#Research</span>
            </div>
          </div>
        </aside>

        <!-- Vertical Fund Cards Grid -->
        <section class="vertical-funds-grid">
          <!-- Card 1: Education -->
          <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/invest-trends.jpg');"></div>
            <div class="fund-card-content">
              <span class="fund-category">Education</span>
              <h4 class="fund-name"><a href="#">Literary Works Fund</a></h4>
              <p class="fund-description">Invest in a diversified portfolio of novels, blogs, and scripts.</p>
              <dl class="fund-stats">
                <div><dt>IP-NFTs</dt><dd>152</dd></div>
                <div><dt>Creators</dt><dd>88</dd></div>
                <div><dt>Volume (30d)</dt><dd>$1.2M</dd></div>
                <div><dt>Shares Avail.</dt><dd>25%</dd></div>
                <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+1.8%</span></dd></div>
                <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+7.5%</span></dd></div>
              </dl>
              <div class="fund-card-actions">
                <button class="action-button view-details-btn" aria-label="View Details for Literary Works Fund">View Details</button>
                <button class="action-button view-details-btn" aria-label="Add Literary Works Fund to Watchlist">
                  <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                </button>
              </div>
            </div>
          </article>

          <!-- Card 2: Finance & Business -->
           <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/placeholder-media.jpg');"></div>
            <div class="fund-card-content">
              <span class="fund-category">Finance & Business</span>
              <h4 class="fund-name"><a href="#">Indie Music Rights</a></h4>
              <p class="fund-description">Royalties from independent artists and music catalogs.</p>
              <dl class="fund-stats">
                <div><dt>IP-NFTs</dt><dd>310</dd></div>
                <div><dt>Creators</dt><dd>150</dd></div>
                <div><dt>Volume (30d)</dt><dd>$850K</dd></div>
                <div><dt>Shares Avail.</dt><dd>40%</dd></div>
                <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+2.1%</span></dd></div>
                <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+9.2%</span></dd></div>
              </dl>
              <div class="fund-card-actions">
                <button class="action-button view-details-btn" aria-label="View Details for Indie Music Rights">View Details</button>
                <button class="action-button view-details-btn" aria-label="Add Indie Music Rights to Watchlist">
                  <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                </button>
              </div>
            </div>
          </article>

          <!-- Card 3: Gaming -->
           <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/placeholder-knowledge.jpg');"></div>
            <div class="fund-card-content">
              <span class="fund-category">Gaming</span>
              <h4 class="fund-name"><a href="#">DeSci Research Papers</a></h4>
              <p class="fund-description">Access and licensing revenue from decentralized scientific research.</p>
              <dl class="fund-stats">
                <div><dt>IP-NFTs</dt><dd>75</dd></div>
                <div><dt>Creators</dt><dd>40</dd></div>
                <div><dt>Volume (30d)</dt><dd>$2.5M</dd></div>
                <div><dt>Shares Avail.</dt><dd>15%</dd></div>
                <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+4.0%</span></dd></div>
                <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+18.5%</span></dd></div>
              </dl>
              <div class="fund-card-actions">
                <button class="action-button view-details-btn" aria-label="View Details for DeSci Research Papers">View Details</button>
                <button class="action-button view-details-btn" aria-label="Add DeSci Research Papers to Watchlist">
                  <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                </button>
              </div>
            </div>
          </article>

          <!-- Card 4: Health & Wellness -->
          <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/placeholder-gaming.jpg');"></div>
            <div class="fund-card-content">
                <span class="fund-category">Health & Wellness</span>
                <h4 class="fund-name"><a href="#">Indie Game Assets</a></h4>
                <p class="fund-description">A collection of tradable assets from emerging indie game studios.</p>
                <dl class="fund-stats">
                    <div><dt>IP-NFTs</dt><dd>500+</dd></div>
                    <div><dt>Creators</dt><dd>65</dd></div>
                    <div><dt>Volume (30d)</dt><dd>$1.8M</dd></div>
                    <div><dt>Shares Avail.</dt><dd>30%</dd></div>
                    <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+3.1%</span></dd></div>
                    <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+12.8%</span></dd></div>
                </dl>
                <div class="fund-card-actions">
                    <button class="action-button view-details-btn" aria-label="View Details for Indie Game Assets">View Details</button>
                    <button class="action-button view-details-btn" aria-label="Add Indie Game Assets to Watchlist">
                      <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                    </button>
                </div>
            </div>
           </article>

           <!-- Card 5: Knowledge & Utilities -->
          <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/invest-trends.jpg');"></div>
            <div class="fund-card-content">
              <span class="fund-category">Knowledge & Utilities</span>
              <h4 class="fund-name"><a href="#">Literary Works Fund</a></h4>
              <p class="fund-description">Invest in a diversified portfolio of novels, blogs, and scripts.</p>
              <dl class="fund-stats">
                <div><dt>IP-NFTs</dt><dd>152</dd></div>
                <div><dt>Creators</dt><dd>88</dd></div>
                <div><dt>Volume (30d)</dt><dd>$1.2M</dd></div>
                <div><dt>Shares Avail.</dt><dd>25%</dd></div>
                <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+1.8%</span></dd></div>
                <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+7.5%</span></dd></div>
              </dl>
              <div class="fund-card-actions">
                <button class="action-button view-details-btn" aria-label="View Details for Literary Works Fund">View Details</button>
                <button class="action-button view-details-btn" aria-label="Add Literary Works Fund to Watchlist">
                  <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                </button>
              </div>
            </div>
          </article>

          <!-- Card 6: Lifestyle -->
           <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/placeholder-media.jpg');"></div>
            <div class="fund-card-content">
              <span class="fund-category">Lifestyle</span>
              <h4 class="fund-name"><a href="#">Indie Music Rights</a></h4>
              <p class="fund-description">Royalties from independent artists and music catalogs.</p>
              <dl class="fund-stats">
                <div><dt>IP-NFTs</dt><dd>310</dd></div>
                <div><dt>Creators</dt><dd>150</dd></div>
                <div><dt>Volume (30d)</dt><dd>$850K</dd></div>
                <div><dt>Shares Avail.</dt><dd>40%</dd></div>
                <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+2.1%</span></dd></div>
                <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+9.2%</span></dd></div>
              </dl>
              <div class="fund-card-actions">
                <button class="action-button view-details-btn" aria-label="View Details for Indie Music Rights">View Details</button>
                <button class="action-button view-details-btn" aria-label="Add Indie Music Rights to Watchlist">
                  <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                </button>
              </div>
            </div>
          </article>

          <!-- Card 7: Technology -->
           <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/placeholder-knowledge.jpg');"></div>
            <div class="fund-card-content">
              <span class="fund-category">Technology</span>
              <h4 class="fund-name"><a href="#">DeSci Research Papers</a></h4>
              <p class="fund-description">Access and licensing revenue from decentralized scientific research.</p>
              <dl class="fund-stats">
                <div><dt>IP-NFTs</dt><dd>75</dd></div>
                <div><dt>Creators</dt><dd>40</dd></div>
                <div><dt>Volume (30d)</dt><dd>$2.5M</dd></div>
                <div><dt>Shares Avail.</dt><dd>15%</dd></div>
                <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+4.0%</span></dd></div>
                <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+18.5%</span></dd></div>
              </dl>
              <div class="fund-card-actions">
                <button class="action-button view-details-btn" aria-label="View Details for DeSci Research Papers">View Details</button>
                <button class="action-button view-details-btn" aria-label="Add DeSci Research Papers to Watchlist">
                  <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                </button>
              </div>
            </div>
          </article>

          <!-- Card 8: Media & Entertainment -->
          <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/placeholder-gaming.jpg');"></div>
            <div class="fund-card-content">
                <span class="fund-category">Media & Entertainment</span>
                <h4 class="fund-name"><a href="#">Indie Game Assets</a></h4>
                <p class="fund-description">A collection of tradable assets from emerging indie game studios.</p>
                <dl class="fund-stats">
                    <div><dt>IP-NFTs</dt><dd>500+</dd></div>
                    <div><dt>Creators</dt><dd>65</dd></div>
                    <div><dt>Volume (30d)</dt><dd>$1.8M</dd></div>
                    <div><dt>Shares Avail.</dt><dd>30%</dd></div>
                    <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+3.1%</span></dd></div>
                    <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+12.8%</span></dd></div>
                </dl>
                <div class="fund-card-actions">
                    <button class="action-button view-details-btn" aria-label="View Details for Indie Game Assets">View Details</button>
                    <button class="action-button view-details-btn" aria-label="Add Indie Game Assets to Watchlist">
                      <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                    </button>
                </div>
            </div>
           </article>

          <!-- Card 9: Politics & News -->
          <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/placeholder-knowledge.jpg');"></div>
            <div class="fund-card-content">
              <span class="fund-category">Politics & News</span>
              <h4 class="fund-name"><a href="#">DeSci Research Papers</a></h4>
              <p class="fund-description">Access and licensing revenue from decentralized scientific research.</p>
              <dl class="fund-stats">
                <div><dt>IP-NFTs</dt><dd>75</dd></div>
                <div><dt>Creators</dt><dd>40</dd></div>
                <div><dt>Volume (30d)</dt><dd>$2.5M</dd></div>
                <div><dt>Shares Avail.</dt><dd>15%</dd></div>
                <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+4.0%</span></dd></div>
                <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+18.5%</span></dd></div>
              </dl>
              <div class="fund-card-actions">
                <button class="action-button view-details-btn" aria-label="View Details for DeSci Research Papers">View Details</button>
                <button class="action-button view-details-btn" aria-label="Add DeSci Research Papers to Watchlist">
                  <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                </button>
              </div>
            </div>
          </article>

          <!-- Card 10: Publishing -->
          <article class="fund-card wrapper">
            <div class="fund-card-thumbnail" style="background-image: url('../img/placeholder-gaming.jpg');"></div>
            <div class="fund-card-content">
                <span class="fund-category">Publishing</span>
                <h4 class="fund-name"><a href="#">Indie Game Assets</a></h4>
                <p class="fund-description">A collection of tradable assets from emerging indie game studios.</p>
                <dl class="fund-stats">
                    <div><dt>IP-NFTs</dt><dd>500+</dd></div>
                    <div><dt>Creators</dt><dd>65</dd></div>
                    <div><dt>Volume (30d)</dt><dd>$1.8M</dd></div>
                    <div><dt>Shares Avail.</dt><dd>30%</dd></div>
                    <div><dt>Yield (7d)</dt><dd><span class="yield-positive">+3.1%</span></dd></div>
                    <div><dt>Yield (30d)</dt><dd><span class="yield-positive">+12.8%</span></dd></div>
                </dl>
                <div class="fund-card-actions">
                    <button class="action-button view-details-btn" aria-label="View Details for Indie Game Assets">View Details</button>
                    <button class="action-button view-details-btn" aria-label="Add Indie Game Assets to Watchlist">
                      <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                    </button>
                </div>
            </div>
           </article>

           <!-- Add more cards as needed -->

        </section>
    </div>

    <div style="height: 160px">&nbsp;</div>	

    <!-- Participant Growth Chart Section -->
    <div style="height: 160px">&nbsp;</div>	
    <h2 class="section-title-divider">Teilnehmer Entwicklung</h2>
    <h6>Wachstum der aktiven Assets über die Zeit.</h6>
    <div style="height: 80px">&nbsp;</div>
    <canvas id="participant-chart" width="600" height="300"></canvas>

    <div style="height: 80px">&nbsp;</div>	
    <!-- Monetization Chart Section -->
    <h2 class="section-title-divider">Category Overview</h2>
    <h6>Track performance across verticals. Spot momentum. See where the value flows.</h6>
    <div style="height: 80px">&nbsp;</div>	

    <!-- Timeframe Filter Buttons -->
    <div class="timeframe-filter-buttons">
        <button class="timeframe-button active" data-timeframe="all">Total</button>
        <button class="timeframe-button" data-timeframe="30d">30 days</button>
        <button class="timeframe-button" data-timeframe="7d">7 days</button>
        <button class="timeframe-button" data-timeframe="1d">1 days</button>
    </div>

    <canvas id="chart" width="600" height="300"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    // Globale Variablen für Daten und Chart-Instanzen
    let chartInstance = null;
    let monetizationChartInstance = null;
    let participantChartInstance = null;
    let originalCategoriesData = [];
    let fullLabels = [];
    let dashboardData = null; 
    let detailedData = null;  
    const colors = [
        '#3498db', '#e74c3c', '#2ecc71', '#f1c40f', '#9b59b6',
        '#1abc9c', '#e67e22', '#34495e', '#f39c12', '#d35400'
    ];

    // --- Helper function to format delta values --- (Global)
    function formatDelta(delta) {
        if (isNaN(delta) || delta === null) {
            return '<span class="delta-neutral">N/A</span>';
        }
        const sign = delta >= 0 ? '+' : '-';
        const absDelta = Math.abs(delta);
        const formattedDelta = absDelta; 
        const className = delta > 0 ? 'delta-positive' : delta < 0 ? 'delta-negative' : 'delta-neutral';
        return `<span class="${className}">${sign}${formattedDelta}</span>`;
    }

    // --- Function to Update Chart and Summary --- (Global)
    // Liest globale Variablen dashboardData, fullLabels, detailedData
    // Aktualisiert globale Chart-Instanzen chartInstance, monetizationChartInstance
    function updateDisplay(timeframe = 'all') {
        console.log(`Updating display for timeframe: ${timeframe}`);

        if (!dashboardData || !Array.isArray(originalCategoriesData) || originalCategoriesData.length === 0 || fullLabels.length === 0) {
            console.error('Cannot update display, essential dashboard data or labels not available.');
            return;
        }

        // --- Zeitfilterung ---
        let startIndex = 0;
        const totalPoints = fullLabels.length;
        if (timeframe === '30d') {
            startIndex = Math.max(0, totalPoints - 30);
        } else if (timeframe === '7d') {
            startIndex = Math.max(0, totalPoints - 7);
        } else if (timeframe === '1d') {
            startIndex = Math.max(0, totalPoints - 2);
            if (totalPoints === 1) startIndex = 0;
        }
        const displayLabels = fullLabels.slice(startIndex);
        const lastDisplayLabel = displayLabels.length > 0 ? displayLabels[displayLabels.length - 1] : null;
        console.log('Last label for CURRENT display period:', lastDisplayLabel);

        // --- Vorbereitung der Daten für beide Sektionen ---
        const categoriesForSummary = dashboardData.kategorien || [];
        const monetizationDataArray = dashboardData.monetarisierung || [];
        const requestedMonetizationTypes = ["Subscriptions", "Licensing", "Advertising", "Staking"];
        const filteredMonetizationData = monetizationDataArray.filter(item => 
            item.Kategorie && requestedMonetizationTypes.includes(item.Kategorie)
        );

        // --- Update Main Chart ---
        if (chartInstance) {
            const displayDatasets = categoriesForSummary.map((kategorie, index) => {
                const categoryName = kategorie.Kategorie;
                if (!categoryName) return null;
                const values = fullLabels.map(label => Number(kategorie[label]) || 0).slice(startIndex);
                return {
                    label: categoryName,
                    data: values,
                    fill: false,
                    borderColor: colors[index % colors.length],
                    tension: 0.1
                };
            }).filter(ds => ds !== null);
            chartInstance.data.labels = displayLabels;
            chartInstance.data.datasets = displayDatasets;
            chartInstance.update();
            console.log('Main chart updated.');
        } else {
            console.error('Main chart instance not available for update.');
        }

        // --- Update Monetization Chart ---
        if (monetizationChartInstance) {
            const displayMonetizationDatasets = filteredMonetizationData.map((item, index) => {
                 const typeName = item.Kategorie;
                 if (!typeName) return null;
                 const values = fullLabels.map(label => Number(item[label]) || 0).slice(startIndex);
                 return {
                     label: typeName,
                     data: values,
                     fill: false,
                     borderColor: colors[index % colors.length],
                     tension: 0.1
                 };
             }).filter(ds => ds !== null);
            monetizationChartInstance.data.labels = displayLabels;
            monetizationChartInstance.data.datasets = displayMonetizationDatasets;
            monetizationChartInstance.update();
            console.log('Monetization chart updated.');
        } else {
            console.error('Monetization chart instance not available for update.');
        }

        // --- Update Summary Cards (Categories) ---
        const summaryContainer = document.getElementById('category-summary-container');
        if (summaryContainer && categoriesForSummary.length > 0) {
            summaryContainer.innerHTML = '';
            let summaryHtml = '';
            let totalLatestValueForPeriod = 0;
            if (lastDisplayLabel) {
                categoriesForSummary.forEach(kategorie => {
                    totalLatestValueForPeriod += Number(kategorie[lastDisplayLabel]) || 0;
                });
            }

            categoriesForSummary.forEach((kategorie, index) => {
                const categoryName = kategorie.Kategorie;
                let currentValueForPeriod = Number(kategorie[lastDisplayLabel]) || 0;
                let currentValueDisplay = lastDisplayLabel ? currentValueForPeriod : 'N/A';
                let percentageDisplay = '0.0%';
                 if (totalLatestValueForPeriod > 0) {
                     percentageDisplay = ((currentValueForPeriod / totalLatestValueForPeriod) * 100).toFixed(1) + '%';
                 } else if (categoriesForSummary.length === 1) {
                     percentageDisplay = '100.0%';
                 }

                 const absoluteLatestValue = Number(kategorie[fullLabels[fullLabels.length - 1]]) || 0;
                 let delta1d = NaN, delta7d = NaN, delta30d = NaN;
                 if (fullLabels.length >= 2) delta1d = absoluteLatestValue - (Number(kategorie[fullLabels[fullLabels.length - 2]]) || 0);
                 if (fullLabels.length >= 8) delta7d = absoluteLatestValue - (Number(kategorie[fullLabels[fullLabels.length - 8]]) || 0);
                 if (fullLabels.length >= 31) delta30d = absoluteLatestValue - (Number(kategorie[fullLabels[fullLabels.length - 31]]) || 0);

                 const categoryIcon = '../img/placeholder-icon.png';
                 summaryHtml += `
                     <article class="category-summary-card">
                         <div class="category-summary-icon" style="background-image: url('${categoryIcon}');"></div>
                         <div class="category-summary-content">
                             <div class="category-summary-info">
                                 <h5 class="category-summary-name">${categoryName}</h5>
                                 <p class="category-summary-value">Total: ${currentValueDisplay} <span class="category-summary-percentage">(${percentageDisplay})</span></p>
                                 <p class="category-summary-delta">1d: ${formatDelta(delta1d)}</p>
                                 <p class="category-summary-delta">7d: ${formatDelta(delta7d)}</p>
                                 <p class="category-summary-delta">30d: ${formatDelta(delta30d)}</p>
                             </div>
                             <div class="category-summary-actions">
                                  <button class="action-button view-details-btn summary-details-btn" aria-label="View Details for ${categoryName}">Details</button>
                                  <button class="action-button watchlist-btn summary-watchlist-btn" aria-label="Add ${categoryName} to Watchlist">
                                    <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                                  </button>
                             </div>
                         </div>
                     </article>
                 `;
            });
            summaryContainer.innerHTML = summaryHtml;
            console.log('Category summary elements updated.');
        } else {
            console.error('Could not update category summary.');
        }

        // --- Update Monetization Summary Cards ---
        const monetizationContainer = document.getElementById('monetization-summary-container');
        if (monetizationContainer && filteredMonetizationData.length > 0) {
             monetizationContainer.innerHTML = '';
             let monetizationHtml = '';
             let totalMonetizationLatestValue = 0;
             if (lastDisplayLabel) {
                 filteredMonetizationData.forEach(item => {
                     totalMonetizationLatestValue += Number(item[lastDisplayLabel]) || 0;
                 });
             }

             filteredMonetizationData.forEach((item, index) => {
                 const typeName = item.Kategorie;
                 let currentValueForPeriod = Number(item[lastDisplayLabel]) || 0;
                 let currentValueDisplay = lastDisplayLabel ? currentValueForPeriod : 'N/A';
                 let percentageDisplay = '0.0%';
                 if (totalMonetizationLatestValue > 0) {
                     percentageDisplay = ((currentValueForPeriod / totalMonetizationLatestValue) * 100).toFixed(1) + '%';
                 } else if (filteredMonetizationData.length === 1) {
                     percentageDisplay = '100.0%';
                 }

                 const absoluteLatestValue = Number(item[fullLabels[fullLabels.length - 1]]) || 0;
                 let delta1d = NaN, delta7d = NaN, delta30d = NaN;
                 if (fullLabels.length >= 2) delta1d = absoluteLatestValue - (Number(item[fullLabels[fullLabels.length - 2]]) || 0);
                 if (fullLabels.length >= 8) delta7d = absoluteLatestValue - (Number(item[fullLabels[fullLabels.length - 8]]) || 0);
                 if (fullLabels.length >= 31) delta30d = absoluteLatestValue - (Number(item[fullLabels[fullLabels.length - 31]]) || 0);

                 const itemIcon = '../img/placeholder-icon.png';
                 monetizationHtml += `
                     <article class="monetization-summary-card">
                         <div class="monetization-summary-icon" style="background-image: url('${itemIcon}');"></div>
                         <div class="monetization-summary-content">
                             <div class="monetization-summary-info">
                                 <h5 class="monetization-summary-name">${typeName}</h5>
                                 <p class="monetization-summary-value">Total: ${currentValueDisplay} <span class="monetization-summary-percentage">(${percentageDisplay})</span></p>
                                 <p class="monetization-summary-delta">1d: ${formatDelta(delta1d)}</p>
                                 <p class="monetization-summary-delta">7d: ${formatDelta(delta7d)}</p>
                                 <p class="monetization-summary-delta">30d: ${formatDelta(delta30d)}</p>
                             </div>
                             <div class="monetization-summary-actions">
                                  <button class="action-button view-details-btn summary-details-btn" aria-label="View Details for ${typeName}">Details</button>
                                  <button class="action-button watchlist-btn summary-watchlist-btn" aria-label="Add ${typeName} to Watchlist">
                                    <span class="watchlist-toggle-icon" aria-hidden="true">☆</span> Watchlist
                                  </button>
                             </div>
                         </div>
                     </article>
                 `;
             });
             monetizationContainer.innerHTML = monetizationHtml;
             console.log('Monetization summary elements updated.');
        } else {
             console.error('Could not update monetization summary.');
             if (monetizationContainer) monetizationContainer.innerHTML = '<p style="color: var(--color-text-secondary);">Keine passenden Monetarisierungsdaten.</p>';
        }

        // --- Placeholder for processing detailedData ---
        if (detailedData) {
            console.log('Detailed data is available for potential use:', detailedData);
        } else {
            console.warn('Detailed data not available.');
        }
    } // End of updateDisplay function

    document.addEventListener('DOMContentLoaded', () => {
        console.log('Initializing investor dashboard');

        // Select elements
        const timeframeButtons = document.querySelectorAll('.timeframe-filter-buttons:not(.monetization-timeframe-buttons) .timeframe-button'); 
        const monetizationTimeframeButtons = document.querySelectorAll('.monetization-timeframe-buttons .timeframe-button'); 
        const chartCanvas = document.getElementById('chart');
        const monetizationChartCanvas = document.getElementById('monetization-chart');
        const participantChartCanvas = document.getElementById('participant-chart');

        // Basic checks
        if (!chartCanvas || !monetizationChartCanvas || !participantChartCanvas) {
            console.error('CRITICAL: Missing one or more canvas elements. Initialization stopped.');
            return;
        }

        // --- Fetch Data and Initial Render --- 
        console.log('Attempting to fetch BOTH data sources');
        Promise.all([
            fetch('ipnft_dashboard_data_reduced.json').then(res => {
                if (!res.ok) throw new Error(`Failed to fetch dashboard data: ${res.status}`);
                return res.json();
            }),
            fetch('ipnft_einzelwerte_indexed.json').then(res => {
                if (!res.ok) {
                   console.warn(`Failed to fetch detailed data: ${res.status}`); 
                   return null; 
                }
                return res.json();
            }).catch(error => {
                console.warn('Error fetching or parsing detailed data:', error);
                return null; 
            })
        ])
        .then(([dashboardResult, detailedResult]) => {
            console.log('Data fetching complete.');
            dashboardData = dashboardResult;
            detailedData = detailedResult;

            console.log('Dashboard Data:', dashboardData);
            if(detailedData) {
              console.log('Detailed Data:', detailedData);
            } else {
              console.log('Detailed Data: Failed to load or not found.');
            }

            // --- Initial Setup using dashboardData ---
            if (!dashboardData || !Array.isArray(dashboardData.kategorien) || dashboardData.kategorien.length === 0) {
              console.error('CRITICAL Error: Dashboard data is missing or invalid. Cannot initialize.');
              return; 
            }
            
            originalCategoriesData = dashboardData.kategorien;
            
            if (originalCategoriesData.length > 0) {
                const firstCategoryKeys = Object.keys(originalCategoriesData[0]);
                fullLabels = firstCategoryKeys
                                   .filter(key => !isNaN(parseInt(key)) && key !== "Kategorie") // Ensure keys are numbers and not the name
                                   .sort((a, b) => Number(a) - Number(b));
                console.log('Extracted Full Labels from Dashboard Data:', fullLabels);
            } else {
                console.error('No categories found in dashboard data to extract labels.');
                return;
            }

            if (fullLabels.length === 0) {
                console.error('No numeric time labels found in the dashboard data.');
                return;
            }
            
            // --- Create Initial Main Chart Instance ---
            console.log('Creating initial main chart instance');
            const initialDatasets = originalCategoriesData.map((kategorie, index) => {
                 const categoryName = kategorie.Kategorie;
                 if (!categoryName) return null;
                 const values = fullLabels.map(label => Number(kategorie[label]) || 0);
                 return {
                     label: categoryName,
                     data: values,
                     fill: false,
                     borderColor: colors[index % colors.length],
                     tension: 0.1
                 };
             }).filter(ds => ds !== null);

            if (initialDatasets.length > 0) {
                 chartInstance = new Chart(chartCanvas, {
                    type: 'line',
                    data: { labels: fullLabels, datasets: initialDatasets },
                    options: { /* Chart options */ }
                });
                 console.log('Initial main chart created successfully.');
            } else {
                 console.error('Failed to generate initial datasets for main chart.');
            }

            // --- Create Initial Monetization Chart Instance ---
            const monetizationDataArrayInit = dashboardData.monetarisierung || [];
            const requestedMonetizationTypesInit = ["Subscriptions", "Licensing", "Advertising", "Staking"];
            const initialMonetizationData = monetizationDataArrayInit.filter(item => 
                item.Kategorie && requestedMonetizationTypesInit.includes(item.Kategorie)
            );

            if (initialMonetizationData.length > 0) {
                console.log('Creating initial monetization chart instance');
                const initialMonetizationDatasets = initialMonetizationData.map((item, index) => {
                     const typeName = item.Kategorie;
                     if (!typeName) return null;
                     const values = fullLabels.map(label => Number(item[label]) || 0);
                     return {
                         label: typeName,
                         data: values,
                         fill: false,
                         borderColor: colors[index % colors.length],
                         tension: 0.1
                     };
                 }).filter(ds => ds !== null);

                if (initialMonetizationDatasets.length > 0) {
                     monetizationChartInstance = new Chart(monetizationChartCanvas, {
                        type: 'line',
                        data: { labels: fullLabels, datasets: initialMonetizationDatasets },
                        options: { /* Chart options */ }
                     });
                     console.log('Initial monetization chart created successfully.');
                } else {
                     console.error('Failed to generate initial datasets for monetization chart.');
                }
            } else {
                console.warn('No initial data found for monetization chart in dashboardData.');
            }

            // --- Calculate and Create Initial Participant Growth Chart ---
            if (detailedData && Array.isArray(detailedData) && detailedData.length > 0 && fullLabels.length > 0) {
                console.log('Calculating participant growth data');
                const seenParticipantIds = new Set();
                const participantCounts = fullLabels.map(label => {
                    const currentLabelNum = Number(label);
                    detailedData.forEach(asset => {
                        const assetId = asset.Asset_ID;
                        // Only check if not already seen
                        if (assetId && !seenParticipantIds.has(assetId)) {
                            // Check if asset appeared at or before this label
                            for (let i = 1; i <= currentLabelNum; i++) {
                                const stepLabel = String(i);
                                if (fullLabels.includes(stepLabel) && asset[stepLabel] !== undefined && Number(asset[stepLabel]) > 0) {
                                    seenParticipantIds.add(assetId);
                                    break; // Found appearance, move to next asset
                                }
                            }
                        }
                    });
                    return seenParticipantIds.size; // Return cumulative count for this label
                });
                console.log('Participant Growth Counts:', participantCounts);

                if (participantChartCanvas && participantCounts.length > 0) {
                     console.log('Creating initial participant growth chart instance');
                     participantChartInstance = new Chart(participantChartCanvas, {
                         type: 'line',
                         data: {
                             labels: fullLabels,
                             datasets: [{
                                 label: 'Teilnehmerzahl', // Or "Asset Count"
                                 data: participantCounts,
                                 fill: false,
                                 borderColor: '#ffffff', // White color for this chart
                                 backgroundColor: 'rgba(255, 255, 255, 0.5)', // Semi-transparent white fill
                                 tension: 0.1
                             }]
                         },
                         options: { // Reuse similar options structure
                             responsive: true,
                             scales: {
                                 x: {
                                     title: { display: true, text: 'Zeitschritte', color: '#fff' }, 
                                     ticks: { color: '#fff' },
                                     grid: { color: 'rgba(255, 255, 255, 0.2)' }
                                 },
                                 y: {
                                     title: { display: true, text: 'Anzahl IDs', color: '#fff' }, 
                                     ticks: { color: '#fff' },
                                     grid: { color: 'rgba(255, 255, 255, 0.2)' },
                                     beginAtZero: true // Ensure Y axis starts at 0
                                 }
                             },
                             plugins: {
                                 legend: {
                                     labels: {
                                         color: '#fff'
                                     }
                                 }
                             }
                         }
                     });
                     console.log('Initial participant growth chart created successfully.');
                 } else {
                     console.error('Failed to generate data for participant growth chart or canvas missing.');
                 }

            } else {
                console.warn('Could not calculate participant growth: Detailed data or labels missing.');
            }

            // Initial display 
            updateDisplay('all'); 

            // --- Add Event Listeners --- 
            console.log('Adding event listeners');
            // Main timeframe buttons
            timeframeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    timeframeButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    const timeframe = button.getAttribute('data-timeframe');
                    updateDisplay(timeframe); 
                });
            });
            // Monetization timeframe buttons
            monetizationTimeframeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    monetizationTimeframeButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    const timeframe = button.getAttribute('data-timeframe');
                    updateDisplay(timeframe); 
                });
            });
            console.log('Event listeners added.');

        })
        .catch(error => {
            console.error('CRITICAL Error during data fetching or initial setup:', error);
        });
    }); // End DOMContentLoaded
    </script>


  <div style="height: 80px">&nbsp;</div>	

  <section id="category-summary-container" class="category-summary-grid"></section>

  <div style="height: 160px">&nbsp;</div>	

  <h2 class="section-title-divider">Monetisation Shares</h2>
  <h6>Break down the revenue. See what pays. Know what earns, how it scales</h6>
  <div style="height: 80px">&nbsp;</div>	
  <div class="timeframe-filter-buttons monetization-timeframe-buttons">
      <button class="timeframe-button active" data-timeframe="all">Total</button>
      <button class="timeframe-button" data-timeframe="30d">30 days</button>
      <button class="timeframe-button" data-timeframe="7d">7 days</button>
      <button class="timeframe-button" data-timeframe="1d">1 days</button>
  </div>
  <canvas id="monetization-chart" width="600" height="300"></canvas>

  <section id="monetization-summary-container" class="monetization-summary-grid"></section>



</center>

	
  <div style="height: 80px">&nbsp;</div>	
	

</div>
	
	
	
<div id="footer-placeholder"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
<script src="ocoso-app-functions.js" defer></script>	
<script src="js/wallet.js" defer></script>	

</body>
</html>